<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://kit.fontawesome.com/08db62848f.js" crossorigin="anonymous"></script>
    <style>
        #sidebar{
            width: 20%;
        }
        #searchresult{
            width: 100%;
            /* margin: 2% 0 0 0; */
            /* border: 1px solid red; */
            display: grid;
            grid-template-columns: repeat(4,1fr);
            gap: 15px;
        }
        #searchresult>div{
            /* display: flex; */
            flex-direction: column;
            /* align-items: center; */
            /* justify-content: center; */
            /* border: 1px solid red; */
            padding: 10px;
            vertical-align: top;
            text-align: left;
        }
        #navbar{
            display: flex;
            border: 1px solid gray;
            width: 100%;
            height: 60px;
        }
        #logo{
            /* border: 1px solid green; */
            width: 25%;
        }
        #img{
            width: 40% ;
            height: 60%;
            /* border: 1px solid red; */
            margin:  12px auto;
        }
        #img>img{
            width: 100%;
            height: 100%;
        }
        #search{
            display: flex;
            /* border: 1px solid green; */
            width: 70%;

        }
        #inputbox{     
            border: 1px solid gray;
            width: 80%;
            height: 80%;
            margin-top: 5px;
        }
        #inputbox>input{
            border: yellow;
            width: 99%;
            height: 95%;   
        }
        button{
            width: 50px;
            height: 47px;
            margin: 5px 0 0 0;
        }
        #main{
            display: flex;
        }
        #showvideo{
            /* border: 1px solid red; */
            width: 65%;
            height: 400px;
            margin: 20px;

        }
        #recommedation{
            width: 30%;
            /* border: 1px solid red; */
            margin: 20px;
        }
        #flexdiv{
            display: flex;
        }
        #div1{
            width: 40%;
            margin: 1%;
        }
        #div2{
            width: 55%;
            margin: 1%;
        }

      

    </style>
</head>
<body>
    <div id="navbar">
        <div id="logo">
            <div id="img">
                <img src="data:image/png;base64,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" alt="">
            </div>
        </div>
        <div id="search">
            <div id="inputbox">
                <input type="text" id="searchterm" placeholder="Search">
            </div>
            <div id="button">
                <button onclick="searchvideo()">search</button>
            </div>
            <div></div>
        </div>      
    </div>
    
        <div id="sidebar"></div>
        <div id="searchresult"></div>
        <div id="main">
            <div id="showvideo"></div>
            <div id="recommedation"></div>    
        </div>
   
</body>
</html>

<script>
    //  'https://youtube.googleapis.com/youtube/v3/videos?part=snippet&chart=mostPopular&maxResults=25&regionCode=IN&key=AIzaSyByo1hICBn3k_t9K69ALKuCdgBwV27UsmQ'

    const homevideo = async () => {
        try{
            // let userinput = document.getElementById("searchterm").value;
            // console.log(userinput)
            let res = await fetch(`https://youtube.googleapis.com/youtube/v3/videos?part=snippet&chart=mostPopular&maxResults=25&regionCode=IN&key=AIzaSyByo1hICBn3k_t9K69ALKuCdgBwV27UsmQ`);
            let data = await res.json();
            console.log(data)
            let videolist = data.items;
            displayData2(videolist);
            console.log(videolist)
        }catch (err){
            console.log(err)
        }
    };

    homevideo();

    // let videoarr = [];

    const displayData2 = (videosArray) => {
        searchresult.innerHTML = "";
        videosArray.forEach((video) => {
            const {
                id: { videoId },
                snippet : { channelTitle },
                snippet : { title },
                snippet : { thumbnails : { high : { url } } },

                // snippet : { thumbnails }default url,
            } = video;

            console.log(url);
            let videocard = document.createElement("div")

            let iframe = document.createElement("img")
            iframe.src = url;
            // iframe.setAttribute("allowfullscreen",true);
            iframe.style.width = "100%";
            iframe.addEventListener("click",function(){
                addtocart(video,videosArray)
            });

            
            let dis = document.createElement("p")
            dis.textContent =  title;
            // dis.addEventListener("click",function(){
            //     addtocart(video,videosArray)
            // });

            let channel = document.createElement("p")
            channel.textContent = channelTitle;

            videocard.append(iframe,dis,channel);
            searchresult.append(videocard);
        });

       
    }





    let API_key = "AIzaSyByo1hICBn3k_t9K69ALKuCdgBwV27UsmQ";
    let searchresult = document.getElementById("searchresult");
    
    // searchvideo();
    const searchvideo = async () => {
        try{
            let userinput = document.getElementById("searchterm").value;
            console.log(userinput)
            let res = await fetch(`https://www.googleapis.com/youtube/v3/search?key=${API_key}&q=${userinput}&type=video&part=snippet&maxResults=25`);
            let data = await res.json();
            console.log(data)
            let videolist = data.items;
            displayData(videolist);
            console.log(videolist)
        }catch (err){
            console.log(err)
        }
    };

    // let videoarr = [];

    const displayData = (videosArray) => {
        searchresult.innerHTML = "";
        videosArray.forEach((video) => {
            const {
                id: { videoId },
                snippet : { channelTitle },
                snippet : { title },
                snippet : { thumbnails : { high : { url } } },

                // snippet : { thumbnails }default url,
            } = video;

            console.log(url);
            let videocard = document.createElement("div")

            let iframe = document.createElement("img")
            iframe.src = url;
            // iframe.setAttribute("allowfullscreen",true);
            iframe.style.width = "100%";
            iframe.addEventListener("click",function(){
                addtocart(video,videosArray)
            });

            
            let dis = document.createElement("p")
            dis.textContent =  title;
            // dis.addEventListener("click",function(){
            //     addtocart(video,videosArray)
            // });

            let channel = document.createElement("p")
            channel.textContent = channelTitle;

            videocard.append(iframe,dis,channel);
            searchresult.append(videocard);
        });

       
    }

    function  addtocart(video,videosArray){
     document.getElementById("searchresult").innerHTML = "";
     document.getElementById("showvideo").innerHTML = "";
     console.log(video)

        const {
                id: { videoId },
                snippet : { channelTitle },
                snippet : { title },
            } = video;


            let videocard = document.createElement("div")

            let iframe = document.createElement("iframe")
            iframe.src = `https://www.youtube.com/embed/${videoId}`;
            iframe.setAttribute("allowfullscreen",true);
            iframe.width = "100%";
            iframe.height="500px";
            // iframe.style.border = "1px solid red"

            
            let dis = document.createElement("p")
            dis.textContent =  title;
            dis.addEventListener("click",function(){
                addtocart(video)
            });

            let channel = document.createElement("p")
            channel.textContent = channelTitle;

            videocard.append(iframe,dis,channel);
            showvideo.append(videocard);

            recommendation(videosArray);
    }

    const recommendation = (videosArray) => {

    videosArray.forEach((video) => {
        const {
            id: { videoId },
            snippet : { channelTitle },
            snippet : { title },
        } = video;


        let videocard2 = document.createElement("div")
        videocard2.setAttribute("id","flexdiv");

        let div1 = document.createElement("div")
        div1.setAttribute("id","div1");

        let iframe = document.createElement("iframe")
        iframe.src = `https://www.youtube.com/embed/${videoId}`;
        iframe.setAttribute("allowfullscreen",true);
        iframe.width = "100%";
        iframe.height="100px";

        div1.append(iframe)

        let div2 = document.createElement("div")
        div2.setAttribute("id","div2");

        let dis = document.createElement("p")
        dis.textContent =  title;

        let channel = document.createElement("p")
        channel.textContent = channelTitle;

        div2.append(dis,channel)

        videocard2.append(div1,div2);
        recommedation.append(videocard2);
    });


    }
    
    // <iframe width="560" 
    // height="315"
    // src="https://www.youtube.com/embed/Y_GaJwGKOZ4"
    // title="YouTube video player" 
    // frameborder="0" 
    // allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
    // allowfullscreen></iframe>
    

</script>